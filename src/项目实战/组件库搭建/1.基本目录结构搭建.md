# åŸºæœ¬ç›®å½•ç»“æ„æ­å»º



## 1.åˆ›å»ºé¡¹ç›®

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º`jeff-ui`ä½œä¸ºé¡¹ç›®æ ¹ç›®å½•ï¼Œå¹¶åˆå§‹åŒ–`pnpm`

```sh
mkdir jeff-ui
cd jeff-ui
pnpm init
```

![image-20250307105011516](./markdown_assets/image-20250307105011516.png)

åˆ›å»ºæˆåŠŸåï¼Œç®€å•è°ƒæ•´ä¸€ä¸‹`package.json`

```json
{
  "name": "jeff-ui",
  "version": "1.0.0",
  "description": "ç»„ä»¶åº“",	// è¡¥å……æè¿°
  "scripts": {},	// æŠŠè„šæœ¬å…ˆå»æ‰
  "author": "jeffrey",	// è®¾ç½®ä½œè€…åç§°
  "license": "MIT" // æ”¹ä¸ºMITåè®®
}
```



## 2.åˆ›å»ºå­åŒ… packages

æˆ‘ä»¬ä¼šæŠŠç»„ä»¶åº“çš„æ ¸å¿ƒä»£ç éƒ½æ”¾åœ¨`packages`ç›®å½•ä¸‹ï¼Œé‡Œé¢ä¼šåŒ…å«`ç»„ä»¶ï¼šcomponents`ã€`å·¥å…·ï¼šutils`ã€`æ ·å¼ï¼štheme-chalk`ç­‰ç­‰çš„å­åŒ…ã€‚

åœ¨æ ¹ç›®å½•ä¸‹ï¼ŒæŠŠæ ¸å¿ƒä»£ç åŒ…é‡Œé¢å­˜æ”¾çš„ä¸€äº›å­åŒ…éƒ½ä¸€ä¸€åˆ›å»ºå¥½ï¼Œå¹¶åˆå§‹åŒ–pnpm

```sh
mkdir packages # ç»„ä»¶åº“çš„æ ¸å¿ƒä»£ç 

# è¿›å…¥æ ¸å¿ƒåŒ…ï¼Œå¼€å§‹åˆ›å»ºç›¸å…³çš„ç›®å½•ç»“æ„
cd packages
mkdir components # ç»„ä»¶
mkdir utils # å…¬å…±å·¥å…·
mkdir theme-chalk # ä¸»é¢˜æ ·å¼

# æ¯ä¸ªåŒ…éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„pnpmé¡¹ç›®ï¼Œæ‰€ä»¥éœ€è¦æŒ¨ä¸ªåˆå§‹åŒ–
cd components
pnpm init

cd ../utils
pnpm init

cd ../theme-chalk
pnpm init
```

![image-20250307105505839](./markdown_assets/image-20250307105505839.png)

<p align="center"><b>åˆ›å»ºå®Œæˆåçš„ç›®å½•ç»“æ„</b></p>

<br />

ä¿®æ”¹æ¯ä¸ªåŒ…çš„`package.json`çš„`name`ï¼Œå°†ä»–ä»¬è®¾ç½®ä¸º`jeff-ui`çš„å­åŒ…ã€‚

ä»¥`./packages/components/package.json`ä¸ºä¾‹ï¼š

```json{2}
{
  "name": "@jeff-ui/components", // ä¸»è¦ä¿®æ”¹è¿™é‡Œï¼ŒåŠ ä¸Š@jeff-uiå‰ç¼€
  "version": "1.0.0",
  "private": true,
  "description": "",
  "main": "index.js",
  "scripts": {},
  "license": "MIT"
}

```

å…¶ä»–å‡ ä¸ªå­åŒ…éƒ½éœ€è¦è¿™ä¹ˆåšï¼ï¼ˆä¸ºåç»­åœ¨æ ¹ç›®å½•ä¸‹å®‰è£…å­åŒ…åšå‡†å¤‡ï¼‰



å­åŒ…åˆ›å»ºå¥½äº†ï¼Œé‚£ä¹ˆç°åœ¨æˆ‘ä»¬æ¥å°è¯•ç›´æ¥å®‰è£…å­åŒ…ï¼

```sh
pnpm i @jeff-ui/components @jeff-ui/utils @jeff-ui/theme-chalk
```

![image-20250429122824600](./markdown_assets/image-20250429122824600.png)

å‡ºé”™äº†ï¼å¯ä»¥çœ‹åˆ°å®ƒç›´æ¥è·‘å»é•œåƒä»“åº“å»æŸ¥æ‰¾æˆ‘ä»¬çš„å­åŒ…ä¸‹è½½äº†ï¼Œè¿™å½“ç„¶æ˜¯æ²¡æœ‰çš„ï¼

é‚£ä¹ˆå¦‚ä½•åšæ‰èƒ½è®©å®ƒä»æˆ‘ä»¬æœ¬åœ°çš„ä»“åº“å»ä¸‹è½½å‘¢ï¼Ÿ

è¿™å°±å¾—æåˆ°pnpmçš„å·¥ä½œç©ºé—´Workspaceäº†ã€‚



## 3.pnpmå·¥ä½œç©ºé—´ï¼ˆWorkspaceï¼‰

> pnpm å†…ç½®äº†å¯¹å•ä¸€å­˜å‚¨åº“ï¼ˆä¹Ÿç§°ä¸ºå¤šåŒ…å­˜å‚¨åº“ã€å¤šé¡¹ç›®å­˜å‚¨åº“æˆ–å•ä½“å­˜å‚¨åº“ï¼‰çš„æ”¯æŒã€‚ä½ å¯ä»¥åˆ›å»ºä¸€ä¸ªå·¥ä½œç©ºé—´ä»¥å°†å¤šä¸ªé¡¹ç›®åˆå¹¶åˆ°ä¸€ä¸ªä»“åº“ä¸­ã€‚
>
> ä¸€ä¸ªå·¥ä½œç©ºé—´å¿…é¡»åœ¨å®ƒçš„æ ¹ç›®å½•æœ‰ä¸€ä¸ª[`pnpm-workspace.yaml`](https://pnpm.io/zh/pnpm-workspace_yaml)æ–‡ä»¶ã€‚

> `pnpm-workspace.yaml` å®šä¹‰äº† [å·¥ä½œç©ºé—´](https://pnpm.io/zh/workspaces) çš„æ ¹ç›®å½•ï¼Œå¹¶èƒ½å¤Ÿä½¿ä½ ä»å·¥ä½œç©ºé—´ä¸­åŒ…å«/æ’é™¤ç›®å½•ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒåŒ…å«æ‰€æœ‰å­ç›®å½•çš„æ‰€æœ‰åŒ…ã€‚



æˆ‘ä»¬åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º`pnpm-workspace.yaml`é…ç½®æ–‡ä»¶ï¼Œç„¶åå†å°è¯•å®‰è£…ï¼Œçœ‹çœ‹ä¼šå‘é€ä»€ä¹ˆ

```yaml
packages:
  # packages/ ç›´æ¥å­ç›®å½•ä¸­çš„æ‰€æœ‰åŒ…
  - 'packages/*'
```

![image-20250429161317877](./markdown_assets/image-20250429161317877.png)

å¯ä»¥çœ‹åˆ°pnpmç»™å‡ºäº†æç¤º

1. å°†ä¾èµ–å®‰è£…åˆ°å·¥ä½œç©ºé—´çš„æ ¹ç›®å½•ä¸‹ï¼šåœ¨å®‰è£…ä¾èµ–çš„å‘½ä»¤ä¸ŠåŠ ä¸Š`-w`æŒ‡ä»¤
2. å¦‚æœä¸æƒ³åŠ `-w`ï¼Œç›´æ¥å®‰è£…ï¼Œä¸è¦æç¤ºå‘Šè­¦ï¼Œå°±åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºé…ç½®`.npmrc`ï¼Œç„¶ååŠ ä¸Šé…ç½®`ignore-workspace-root-check=true`



æˆ‘ä»¬ç›´æ¥ç»™å‘½ä»¤åŠ ä¸Š`-w`æŒ‡ä»¤å§

![image-20250429181101956](./markdown_assets/image-20250429181101956.png)

è¿˜æ˜¯æœ‰é—®é¢˜å‘€ï¼æŸ¥æŸ¥æ–‡æ¡£....ohï¼è¿˜æœ‰ä¸€ä¸ªå…³é”®é…ç½®`link-workspace-packages`

> If [linkWorkspacePackages](https://pnpm.io/zh/settings#linkWorkspacePackages) is set to `true`, pnpm will link packages from the workspace if the available packages match the declared ranges. 

### 3.1 link-workspace-packages

> ### [link-workspace-packages](https://pnpm.io/zh/npmrc#link-workspace-packages)
>
> - é»˜è®¤å€¼ï¼š **false**
> - ç±»å‹ï¼š**true**ã€**false**ã€**deep**
>
> å°† monorepo å·¥ä½œç©ºé—´ä¸­æœ¬åœ°å¯ç”¨çš„åŒ…é“¾æ¥åˆ° `node_modules`ï¼Œè€Œä¸æ˜¯ä»æ³¨å†Œæºä¸­é‡æ–°ä¸‹è½½å®ƒä»¬ã€‚ è¿™æ¨¡æ‹Ÿäº†ç±»ä¼¼äº `yarn workspace` çš„åŠŸèƒ½ ã€‚
>
> å½“è®¾ç½®ä¸º deep æ—¶ï¼Œæœ¬åœ°åŒ…ä¹Ÿå¯ä»¥é“¾æ¥åˆ°å­ä¾èµ–é¡¹ã€‚
>
> Be advised that it is encouraged instead to use [`pnpm-workspace.yaml`](https://pnpm.io/zh/next/settings#linkWorkspacePackages) for this setting, to enforce the same behaviour in all environments. ï¼ˆè¿™å¥è¯åœ¨ä¸­æ–‡æ–‡æ¡£æ²¡æœ‰ç¿»è¯‘ï¼Œå¤§æ„å°±æ˜¯å»ºè®®å¼€å‘è€…åº”é…åˆä½¿ç”¨ pnpm-workspace.yaml æ¥é…ç½®å·¥ä½œåŒºç›¸å…³çš„è®¾ç½®ï¼Œä»¥ç¡®ä¿æ— è®ºåœ¨å“ªä¸ªç¯å¢ƒä¸‹è¿è¡Œï¼Œpnpm çš„è¡Œä¸ºéƒ½æ˜¯ç›¸åŒå’Œç¨³å®šçš„ã€‚è¿™æ ·åšå¯ä»¥å‡å°‘å› ä¸ºç¯å¢ƒå·®å¼‚å¸¦æ¥çš„æ½œåœ¨é—®é¢˜ï¼Œå¢å¼ºé¡¹ç›®çš„å¯ç»´æŠ¤æ€§å’Œä¸€è‡´æ€§ã€‚ï¼‰

æˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»ºä¸€ä¸ª`.npmrc`

```sh
link-workspace-packages=true
```

ç„¶åå†æ‰§è¡Œä¸€æ¬¡ä¾èµ–å®‰è£…

![image-20250429181215838](./markdown_assets/image-20250429181215838.png)

ç»ˆäºæˆåŠŸå•¦ï¼å¯ä»¥çœ‹åˆ°æ ¹ç›®å½•ä¸‹çš„`node_modules`ç°åœ¨åŒ…å«äº†`@jeff-ui`ç›¸å…³çš„å­åŒ…

![image-20250429181427311](./markdown_assets/image-20250429181427311.png)

`package.json`çš„ä¾èµ–ä½¿ç”¨çš„æ˜¯`workspace`åè®®

![image-20250429181446411](./markdown_assets/image-20250429181446411.png)

> å¦‚æœæ²¡æœ‰ä½¿ç”¨æ­¤æ–‡ä»¶è¿›è¡Œ`packages`çš„é…ç½®ï¼Œåœ¨é…ç½®äº†`shamefully-hoist=true`ï¼Œä¸”`package.json`é‡Œé¢å·²ç»æœ‰ä¸€ä¸ªå·¥ä½œç©ºé—´å†…çš„ä¾èµ–åŒ…ï¼ˆ`"dependencies": {"@jeff-ui/components": "workspace:^"}`ï¼‰çš„å‰æä¸‹ï¼Œå½“æˆ‘ä»¬åœ¨æ ¹ç›®å½•æ‰§è¡Œ`pnpm install -w`æ—¶ï¼Œpnpmä¼šè‡ªåŠ¨æ£€ç´¢æ•´ä¸ªé¡¹ç›®ç›®å½•ä¸­ï¼Œæ‰€æœ‰åŒ…å«package.jsonçš„åŒ…ï¼Œå¹¶ç›´æ¥å…¨éƒ¨ä¸‹è½½åˆ°æ ¹ç›®å½•çš„`node_modules`ä¸­ã€‚
>
> æ¯”å¦‚æˆ‘ä»¬åœ¨æ ¹ç›®å½•åˆ›å»ºäº†ä¸€ä¸ªtestxxxç›®å½•ï¼Œå¹¶ä¸”åœ¨testxxxç›®å½•ä¸­æ‰§è¡Œäº†åˆå§‹åŒ–`pnpm init`ï¼Œé‚£ä¹ˆåœ¨å®‰è£…ä¾èµ–æ—¶ï¼Œè¯¥åŒ…ä¹Ÿä¼šè¢«é“¾æ¥å®‰è£…åˆ°`node_modules`ä¸­ï¼Œç„¶è€Œæˆ‘ä»¬å¹¶ä¸éœ€è¦å®ƒè¢«å®‰è£…ï¼



### 3.2 shamefully-hoist

è¿™ä¸ªé…ç½®æˆ‘ä»¬ä¹Ÿæå‰é…ç½®å¥½ï¼Œåé¢ä¼šç”¨åˆ°

> ### [shamefully-hoist](https://pnpm.io/zh/npmrc#shamefully-hoist)
>
> - é»˜è®¤å€¼ï¼š **false**
> - ç±»å‹ï¼š**Boolean**
>
> é»˜è®¤æƒ…å†µä¸‹ï¼Œpnpm åˆ›å»ºä¸€ä¸ªåŠä¸¥æ ¼çš„ `node_modules`ï¼Œè¿™æ„å‘³ç€ä¾èµ–é¡¹å¯ä»¥è®¿é—®æœªå£°æ˜çš„ä¾èµ–é¡¹ï¼Œä½† `node_modules` ä¹‹å¤–çš„æ¨¡å—ä¸è¡Œã€‚ é€šè¿‡è¿™ç§å¸ƒå±€ï¼Œç”Ÿæ€ç³»ç»Ÿä¸­çš„å¤§å¤šæ•°çš„åŒ…éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ ä½†æ˜¯ï¼Œå¦‚æœæŸäº›å·¥å…·ä»…åœ¨æå‡çš„ä¾èµ–é¡¹ä½äºæ ¹ç›®å½•çš„ `node_modules` æ—¶æ‰æœ‰æ•ˆï¼Œä½ å¯ä»¥å°†å…¶è®¾ç½®ä¸º `true` æ¥æå‡å®ƒä»¬ã€‚

æˆ‘ä»¬åœ¨`.npmrc`ä¸­åŠ ä¸Šè¿™æ¡é…ç½®

```sh{2}
link-workspace-packages = true
shamefully-hoist = true
```

åšäº†è¿™ä¸€æ­¥é…ç½®ä¹‹åï¼Œé¡¹ç›®å†…æ‰€æœ‰å®‰è£…çš„ä¾èµ–åŒ…ï¼Œéƒ½ä¼šè¢«æå‡åˆ°æ ¹ç›®å½•ä¸‹çš„`node_modules`ï¼Œä¹‹ååªè¦æœ‰å®‰è£…è¿‡çš„ä¾èµ–ï¼Œåœ¨é¡¹ç›®å†…çš„ä»»ä½•ä½ç½®éƒ½èƒ½å¼•å…¥ä½¿ç”¨ï¼Œä¸ä¼šå‡ºç°æŸ¥æ‰¾ä¸åˆ°çš„æƒ…å†µã€‚

ä¸¾ä¸ªä¾‹å­ï¼Œå¦‚æœæˆ‘ä»¬åœ¨æ ¹ç›®å½•ä¸‹è½½ä¸€ä¸ªvueè„šæ‰‹æ¶æ¨¡ç‰ˆ`pnpm create vite@latest xxxdir123 --template vue`ï¼Œåœ¨æ²¡æœ‰å°†`shamefully-hoist`è®¾ç½®ä¸º`true`çš„æ—¶å€™ï¼Œè¿›å…¥ç›®å½•æ‰§è¡Œ`pnpm install`å»ä¸‹è½½ä¾èµ–ï¼Œè¿™äº›ä¾èµ–å°±åªä¼šè¢«ä¸‹è½½åˆ°`xxxdir123`è¿™ä¸ªåŒ…é‡Œé¢çš„`node_modules`ä¸­ã€‚ä½†å¦‚æœåšäº†è®¾ç½®ï¼Œè¿™äº›ä¾èµ–ä¸ä»…ä¼šè¢«ä¸‹è½½åˆ°è¯¥ç›®å½•ä¸‹ï¼Œè¿˜ä¼šè¢«æå‡åˆ°æ ¹ç›®å½•ä¸‹çš„`node_modules`ä¸­ã€‚è¿™æ ·çš„å¥½å¤„åœ¨äºï¼Œä¹‹ååœ¨æ•´ä¸ªå·¥ä½œç›®å½•ä¸‹ï¼Œæ‰€æœ‰å­åŒ…ä¹‹é—´ï¼Œéƒ½å¯ä»¥ç›¸äº’ä½¿ç”¨å„è‡ªæš´éœ²å‡ºæ¥çš„å†…å®¹äº†ã€‚



## 4.åº”ç”¨åŒ… playground

`playground`æ˜¯æˆ‘ä»¬ç”¨æ¥ä½¿ç”¨å’Œæµ‹è¯•æˆ‘ä»¬æ‰€å®Œæˆçš„ç»„ä»¶çš„åœ°æ–¹ï¼Œç›¸å½“äºä¸€ä¸ªæ¼”ç¤ºå…ã€‚

æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨`vue-ts`æ¨¡æ¿æ¥åˆ›å»ºé¡¹ç›®ï¼š

```sh
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ
pnpm create vite@latest play --template vue-ts
```

![image-20250430152453022](./markdown_assets/image-20250430152453022.png)

> è®°å¾—æŠŠ`playground`çš„`package.json`ä¸­çš„nameä¹Ÿä¿®æ”¹ä¸ºå­åŒ…
>
> ```json
> {
>   "name": "@jeff-ui/playground"
> }
> ```
>

æ¥ä¸‹æ¥å‡†å¤‡å®‰è£…ä¸€ä¸‹ä¾èµ–ï¼Œç„¶åå°è¯•è¿è¡Œã€‚

å…ˆåœ¨`pnpm-workspace.yaml`ä¸­æ–°å¢â€œplayâ€åŒ…çš„å®šä¹‰ï¼Œè¿™æ ·å½“æˆ‘ä»¬åœ¨æ ¹ç›®å½•æ‰§è¡Œ`pnpm install`å®‰è£…ä¾èµ–æ—¶ï¼Œå°±ä¼šå»æŸ¥æ‰¾æŒ‡å®šå¥½çš„å­åŒ…ï¼Œå¹¶æ ¹æ®å­åŒ…çš„`package.json`è¿›è¡Œä¾èµ–å®‰è£…ã€‚

```yaml{4}
packages:
  # packages/ ç›´æ¥å­ç›®å½•ä¸­çš„æ‰€æœ‰åŒ…
  - 'packages/*'
  - 'play' # æ–°å¢å­åŒ…
```

æ¥ç€åœ¨æ ¹ç›®å½•ä¸‹æ‰§è¡Œä¾èµ–å®‰è£…çš„å‘½ä»¤

```sh
jeffrey@jeffrey-macbook jeff-ui % pnpm install
# ä»¥ä¸‹æ˜¯è¾“å‡ºå†…å®¹
Scope: all 4 workspace projects # æ£€æµ‹åˆ°æœ‰4ä¸ªå·¥ä½œç©ºé—´é¡¹ç›®ï¼ˆå…¶ä¸­ä¸€ä¸ªå°±æ˜¯æˆ‘ä»¬å®šä¹‰çš„playgroundåŒ…
Packages: +31
+++++++++++++++++++++++++++++++
Progress: resolved 74, reused 31, downloaded 0, added 31, done
Done in 2.2s
```

å®‰è£…å¥½ä¾èµ–äº†ï¼Œä»”ç»†è§‚å¯Ÿï¼Œä¾èµ–ç›®å‰æ˜¯å®‰è£…åˆ°äº†playåŒ…ä¸‹é¢äº†ã€‚

![image-20250430153018980](markdown_assets/image-20250430153018980.png)

å¦‚æœä»…ä»…åªæ˜¯playåŒ…è¿è¡Œå½“ç„¶é—®é¢˜ä¸å¤§ï¼Œä½†æ˜¯æˆ‘ä»¬ä¹‹åè¦å¼€å§‹åœ¨å…¶ä»–åŒ…ç¼–å†™vueç»„ä»¶ï¼Œä¹Ÿéœ€è¦ç”¨åˆ°vueæ¡†æ¶ã€tsç­‰ä¾èµ–ï¼Œéš¾é“åˆè¦é‡æ–°ä¸‹è½½ä¸€æ¬¡ï¼Ÿè¿™å°±æ˜¾å¾—éº»çƒ¦ä¸”è‡ƒè‚¿äº†ï¼Œè€Œä¸”ä¸åŒåŒ…ä½¿ç”¨çš„å·¥å…·è¿˜ä¼šå‡ºç°ç‰ˆæœ¬ä¸åŒçš„å…¼å®¹é—®é¢˜ã€‚

æ‰€ä»¥åˆç†ä¸€ç‚¹çš„æ–¹æ¡ˆåº”è¯¥æ˜¯æŠŠæ‰€æœ‰çš„ä¾èµ–éƒ½ä¸‹è½½åˆ°æ ¹ç›®å½•ä¸‹çš„`node_modules`ä¸­ï¼Œè¿™æ ·æ‰€æœ‰å­åŒ…åœ¨ä»»ä½•ä½ç½®éƒ½å¯ä»¥ç›´æ¥å¼•å…¥ä¸‹è½½è¿‡çš„ä¾èµ–äº†ã€‚

é€šè¿‡è®¾ç½®é…ç½®é¡¹`shamefully-hoist`ä¸º`true`ï¼Œå³å¯å®ç°ã€‚

### 4.1 shamefully-hoist

> ### [shamefully-hoist](https://pnpm.io/zh/npmrc#shamefully-hoist)
>
> - é»˜è®¤å€¼ï¼š **false**
> - ç±»å‹ï¼š**Boolean**
>
> é»˜è®¤æƒ…å†µä¸‹ï¼Œpnpm åˆ›å»ºä¸€ä¸ªåŠä¸¥æ ¼çš„ `node_modules`ï¼Œè¿™æ„å‘³ç€ä¾èµ–é¡¹å¯ä»¥è®¿é—®æœªå£°æ˜çš„ä¾èµ–é¡¹ï¼Œä½† `node_modules` ä¹‹å¤–çš„æ¨¡å—ä¸è¡Œã€‚ é€šè¿‡è¿™ç§å¸ƒå±€ï¼Œç”Ÿæ€ç³»ç»Ÿä¸­çš„å¤§å¤šæ•°çš„åŒ…éƒ½å¯ä»¥æ­£å¸¸å·¥ä½œã€‚ ä½†æ˜¯ï¼Œå¦‚æœæŸäº›å·¥å…·ä»…åœ¨æå‡çš„ä¾èµ–é¡¹ä½äºæ ¹ç›®å½•çš„ `node_modules` æ—¶æ‰æœ‰æ•ˆï¼Œä½ å¯ä»¥å°†å…¶è®¾ç½®ä¸º `true` æ¥æå‡å®ƒä»¬ã€‚

æˆ‘ä»¬åœ¨`.npmrc`ä¸­åŠ ä¸Šè¿™æ¡é…ç½®

```sh{2}
link-workspace-packages = true
shamefully-hoist = true
```

åšäº†è¿™ä¸€æ­¥é…ç½®ä¹‹åï¼Œé¡¹ç›®å†…æ‰€æœ‰å®‰è£…çš„ä¾èµ–åŒ…ï¼Œéƒ½ä¼šè¢«æå‡åˆ°æ ¹ç›®å½•ä¸‹çš„`node_modules`ï¼Œä¹‹ååªè¦æœ‰å®‰è£…è¿‡çš„ä¾èµ–ï¼Œåœ¨é¡¹ç›®å†…çš„ä»»ä½•ä½ç½®éƒ½èƒ½å¼•å…¥ä½¿ç”¨ï¼Œä¸ä¼šå‡ºç°æŸ¥æ‰¾ä¸åˆ°çš„æƒ…å†µã€‚



åŠ å¥½é…ç½®ä»¥åï¼Œè®©æˆ‘ä»¬å†æ¬¡å°è¯•ä¾èµ–å®‰è£…ï¼š

```sh
pnpm install
```

![image-20250430172256775](markdown_assets/image-20250430172256775.png)

æç¤ºæˆ‘ä»¬æ ¹ç›®å½•ä¸‹çš„`node_modules`ä¼šè¢«ç§»é™¤é‡è£…ï¼Œå›è½¦ç¡®è®¤å³å¯ã€‚

![image-20250430172326335](./markdown_assets/image-20250430172326335.png)

![image-20250430172502288](./markdown_assets/image-20250430172502288.png)

å¯ä»¥çœ‹åˆ°æ ¹ç›®å½•ä¸‹çš„`node_modules`æ–°å¢äº†å¾ˆå¤šä¾èµ–åŒ…äº†ã€‚

æ¥ä¸‹æ¥å°è¯•è¿è¡Œä¸€ä¸‹`play`åŒ…çš„vueé¡¹ç›®å§ï¼Œæˆ‘ä»¬å¯ä»¥ç›´æ¥è¿›å…¥åˆ°`play`åŒ…ç„¶åæ‰§è¡Œ`pnpm dev`ï¼Œä½†è¿™æ ·æ˜¾å¾—æœ‰ç‚¹éº»çƒ¦ã€‚

ä¸ºäº†ä¸è¦æ¯æ¬¡è¿è¡Œéƒ½è¿›å…¥`play`åŒ…æ‰èƒ½è¿è¡Œï¼Œå¯ä»¥ç›´æ¥åœ¨æ ¹ç›®å½•ä¸‹çš„`package.json`é…ç½®ä¸€ä¸ªå¯åŠ¨è„šæœ¬ï¼Œæ–¹ä¾¿ç›´æ¥å¯åŠ¨é¡¹ç›®ã€‚

```json{6}
{
  "name": "jeff-ui",
  "version": "1.0.0",
  "description": "ç»„ä»¶åº“",
  "scripts": {
    "dev": "pnpm -C playground dev"
  },
  "author": "jeffrey",
  "license": "MIT",
  "devDependencies": {
    "@jeff-ui/components": "workspace: *",
    "@jeff-ui/theme-chalk": "workspace: *",
    "@jeff-ui/utils": "workspace: *"
  },
  "dependencies": {
    "vue": "^3.5.13"
  }
}
```

ç›´æ¥åœ¨æ ¹ç›®å½•ä¸‹è¿è¡Œï¼š

```sh
pnpm dev
```

![image-20250322152806630](./markdown_assets/image-20250322152806630.png)

è·‘èµ·æ¥äº†ï¼ä¹‹åå†™å¥½çš„ç»„ä»¶ï¼Œéƒ½å¯ä»¥å°è¯•ç›´æ¥åœ¨è¿™é‡Œå¼•å…¥ï¼Œè¿›è¡Œç»„ä»¶ä½¿ç”¨å’Œæµ‹è¯•å•¦ï¼



## 5.ç±»å‹åŒ… typing

åˆ›å»ºä¸€ä¸ª`typing`ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æˆ‘ä»¬å…³äºTSçš„ä¸€äº›å£°æ˜æ–‡ä»¶ã€‚

```sh
mkdir typing
```

![image-20250307120755845](./markdown_assets/image-20250307120755845.png)

å…ˆé¢„ç•™ç€ç›®å½•ï¼Œä¸åšå…¶ä»–å¤„ç†ã€‚



åœ¨é¡¹ç›®æ ¹ç›®å½•åˆ›å»ºtsçš„é…ç½®æ–‡ä»¶`tsconfig.json`

```json
{
  "compilerOptions": {
      "module": "ESNext", // æŒ‡å®šæ‰“åŒ…æ¨¡å—ç±»å‹ä¸ºESNextï¼Œç´§è·Ÿç°ä»£JavaScriptæ¨¡å—åŒ–è§„èŒƒ
      "declaration": false, // é»˜è®¤ä¸ºä¸ç”Ÿæˆå£°æ˜æ–‡ä»¶ï¼Œå‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶è¾“å‡º
      "noImplicitAny": true, // ä¸¥ç¦æœªå£°æ˜ç±»å‹çš„å˜é‡ï¼Œå¢å¼ºä»£ç çš„ç±»å‹å®‰å…¨æ€§
      "removeComments": true, // ç¼–è¯‘æ—¶è‡ªåŠ¨åˆ é™¤æ³¨é‡Šï¼Œç²¾ç®€ä»£ç ä½“ç§¯
      "moduleResolution": "node", // æŒ‰ç…§Node.jsçš„æ¨¡å—è§£æè§„åˆ™è¿›è¡Œæ¨¡å—æŸ¥æ‰¾
      "esModuleInterop": true, // æ”¯æŒES6æ¨¡å—ä¸CommonJSæ¨¡å—çš„äº’æ“ä½œæ€§
      "jsx": "preserve", // ä¿ç•™JSXè¯­æ³•ï¼Œæ–¹ä¾¿åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨JSXè¿›è¡Œè§†å›¾ç¼–å†™
      "noLib": false, // æ­£å¸¸å¤„ç†ç±»åº“ï¼Œç¡®ä¿é¡¹ç›®ä¾èµ–çš„å„ç±»åº“æ–‡ä»¶èƒ½è¢«æ­£ç¡®è§£æ
      "target": "ES6", // ä»¥ES6æ ‡å‡†ä¸ºç›®æ ‡ç¼–è¯‘ä»£ç ï¼Œä¿è¯ä»£ç åœ¨ä¸»æµç¯å¢ƒä¸­çš„å…¼å®¹æ€§
      "sourceMap": true, // ç”Ÿæˆsource - mapæ–‡ä»¶ï¼Œæ–¹ä¾¿è°ƒè¯•æ—¶å®šä½åŸå§‹ä»£ç ä½ç½®
      "lib": [
          "ESNext",
          "DOM"
      ], // æŒ‡å®šç¼–è¯‘æ—¶ä½¿ç”¨çš„åº“ï¼Œæ¶µç›–æœ€æ–°çš„JavaScriptç‰¹æ€§ä¸DOMç›¸å…³åŠŸèƒ½
      "allowSyntheticDefaultImports": true, // å…è®¸ä»æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­è¿›è¡Œé»˜è®¤å¯¼å…¥
      "experimentalDecorators": true, // å¯ç”¨è£…é¥°å™¨ç‰¹æ€§ï¼Œä¸ºä»£ç ç¼–å†™æä¾›æ›´ä¼˜é›…çš„æ–¹å¼
      "forceConsistentCasingInFileNames": true, // å¼ºåˆ¶æ–‡ä»¶åå¤§å°å†™ä¸€è‡´ï¼Œé¿å…å› å¤§å°å†™é—®é¢˜å¯¼è‡´çš„æ¨¡å—åŠ è½½é”™è¯¯
      "resolveJsonModule": true, // æ”¯æŒè§£æJSONæ¨¡å—ï¼Œæ–¹ä¾¿å¼•å…¥å’Œä½¿ç”¨JSONæ•°æ®
      "strict": true, // å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå…¨é¢æå‡ä»£ç çš„ä¸¥è°¨æ€§å’Œå¯é æ€§
      "skipLibCheck": true // è·³è¿‡ç±»åº“æ£€æµ‹ï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦
  },
  "exclude": [
      "node_modules",
      "**/__tests__",
      "dist/**"
  ]
}

```

> ç›´æ¥é…é»˜è®¤çš„ä¹Ÿè¡Œï¼ŒæŒ‰è‡ªå·±éœ€æ±‚æ”¹å§
>
> ```sh
> npx tsc --init
> ```



åŒæ ·çš„ï¼Œåœ¨`pnpm-workspace.yaml`ä¸­æ–°å¢å®šä¹‰

```yaml{5}
packages:
  # packages/ ç›´æ¥å­ç›®å½•ä¸­çš„æ‰€æœ‰åŒ…
  - 'packages/*'
  - 'playground'
  - 'typing' # æ–°å¢å­åŒ…
```





è‡³æ­¤ï¼Œæˆ‘ä»¬ç»„ä»¶åº“çš„åŸºæœ¬é¡¹ç›®ç›®å½•ç»“æ„ï¼Œå°±å·²ç»åŸºæœ¬æˆå‹äº†ğŸ˜†ğŸ‰ğŸ‰ğŸ‰ã€‚
