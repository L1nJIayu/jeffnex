# 渲染函数

![image-20250610110940213](markdown_assets/image-20250610110940213.png)

<div style="text-align:center"><b>组件更新原理</b></div>


渲染函数是组成完整的Vue响应式渲染系统的另一半。

Vue会将template模板编译成渲染函数，然后通过调用渲染函数生成虚拟DOM（VNode），最后将虚拟DOM渲染成真实DOM。
Vue会监听状态的变化，当状态发生变化时，会重新调用渲染函数生成新的虚拟DOM，然后通过对比新旧虚拟DOM的差异，最终只更新需要更新的真实DOM节点，从而实现高效的DOM更新。

## 虚拟DOM

所谓的虚拟DOM，其实本质是一个JavaScript对象，用来描述真实DOM的结构。
例如：
```js
const VNode = {
  tag: 'div',
  props: {
    class: 'container'
  },
  children: [
    {
      tag: 'h1',
      props: {
        class: 'title'
      },
      children: 'Hello World'
    }
  ]
}
```
该虚拟DOM描述了一个div元素，其中包含一个h1元素，h1元素中包含文本内容"Hello World"。
相当于：
```html
<div class="container">
  <h1 class="title">Hello World</h1>
</div>
```

为什么要用虚拟DOM？

我们知道一个DOM元素有很多属性，比如class、style、id、data-*等，如果直接操作DOM，那么就需要逐个设置这些属性，非常繁琐。而虚拟DOM则将这些属性封装成一个JavaScript对象，只需要操作JavaScript对象，就可以实现DOM的更新，大大简化了操作。



## 渲染函数的使用

在Vue中，可以使用渲染函数来创建组件，例如：
```js
Vue.component('my-component', {
  render: function (createElement) {
    return createElement('div', {
      class: 'container'
    }, [
      createElement('h1', {
        class: 'title'
      }, 'Hello World')
    ])
  }
})
```