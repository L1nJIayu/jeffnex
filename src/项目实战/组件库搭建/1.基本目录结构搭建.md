# åŸºæœ¬ç›®å½•ç»“æ„æ­å»º



## 1.åˆ›å»ºé¡¹ç›®

é¦–å…ˆï¼Œæˆ‘ä»¬éœ€è¦åˆ›å»º`jeff-ui`ä½œä¸ºé¡¹ç›®æ ¹ç›®å½•ï¼Œå¹¶åˆå§‹åŒ–`pnpm`

```sh
mkdir jeff-ui
cd jeff-ui
pnpm init
```

![image-20250307105011516](markdown_assets/image-20250307105011516.png)

åˆ›å»ºæˆåŠŸåï¼Œç®€å•è°ƒæ•´ä¸€ä¸‹`package.json`

```json
{
  "name": "jeff-ui",
  "version": "1.0.0",
  "description": "ç»„ä»¶åº“",
  "scripts": {},
  "author": "jeffrey",
  "license": "MIT"
}
```



## 2.å­åŒ… packages

æˆ‘ä»¬ä¼šæŠŠç»„ä»¶åº“çš„æ ¸å¿ƒä»£ç éƒ½æ”¾åœ¨`packages`ç›®å½•ä¸‹ï¼Œé‡Œé¢ä¼šåŒ…å«`ç»„ä»¶ï¼šcomponents`ã€`å·¥å…·ï¼šutils`ã€`æ ·å¼ï¼štheme-chalk`ç­‰ç­‰çš„å­åŒ…ã€‚

åœ¨æ ¹ç›®å½•ä¸‹ï¼ŒæŠŠæ ¸å¿ƒä»£ç åŒ…é‡Œé¢å­˜æ”¾çš„ä¸€äº›å­åŒ…éƒ½ä¸€ä¸€åˆ›å»ºå¥½ï¼Œå¹¶åˆå§‹åŒ–pnpm

```sh
mkdir packages # ç»„ä»¶åº“çš„æ ¸å¿ƒä»£ç 

# è¿›å…¥æ ¸å¿ƒåŒ…ï¼Œå¼€å§‹åˆ›å»ºç›¸å…³çš„ç›®å½•ç»“æ„
cd packages
mkdir components # ç»„ä»¶
mkdir utils # å…¬å…±å·¥å…·
mkdir theme-chalk # ä¸»é¢˜æ ·å¼

# æ¯ä¸ªåŒ…éƒ½æ˜¯ä¸€ä¸ªå•ç‹¬çš„pnpmé¡¹ç›®ï¼Œæ‰€ä»¥éœ€è¦æŒ¨ä¸ªåˆå§‹åŒ–
cd components
pnpm init

cd ../utils
pnpm init

cd ../theme-chalk
pnpm init
```

![image-20250307105505839](markdown_assets/image-20250307105505839.png)

<p align="center"><b>åˆ›å»ºå®Œæˆåçš„ç›®å½•ç»“æ„</b></p>

<br />

ä¿®æ”¹æ¯ä¸ªåŒ…çš„`package.json`çš„`name`ï¼Œå°†ä»–ä»¬è®¾ç½®ä¸º`jeff-ui`çš„å­åŒ…ã€‚

ä»¥`./packages/components/package.json`ä¸ºä¾‹ï¼š

```json{2}
{
  "name": "@jeff-ui/components", // ä¸»è¦ä¿®æ”¹è¿™é‡Œï¼ŒåŠ ä¸Š@jeff-uiå‰ç¼€
  "version": "1.0.0",
  "private": true,
  "description": "",
  "main": "index.js",
  "scripts": {},
  "license": "MIT"
}

```

å…¶ä»–å‡ ä¸ªå­åŒ…éƒ½éœ€è¦è¿™ä¹ˆåšï¼



## 3.åº”ç”¨åŒ… playground

`playground`æ˜¯æˆ‘ä»¬ç”¨æ¥ä½¿ç”¨å’Œæµ‹è¯•æˆ‘ä»¬æ‰€å®Œæˆçš„ç»„ä»¶çš„åœ°æ–¹ï¼Œç›¸å½“äºä¸€ä¸ªæ¼”ç¤ºå…ã€‚

æˆ‘ä»¬å¯ä»¥ç›´æ¥ä½¿ç”¨`vue-ts`æ¨¡æ¿æ¥åˆ›å»ºé¡¹ç›®ï¼š

```sh
# åœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹æ‰§è¡Œ
pnpm create vite@latest playground --template vue-ts

# å®‰è£…ä¾èµ–
cd playground
pnpm install
```

![image-20250307120505383](markdown_assets/image-20250307120505383.png)

> è®°å¾—æŠŠ`playground`çš„`package.json`ä¸­çš„nameä¹Ÿä¿®æ”¹ä¸ºå­åŒ…
>
> ```json
> {
>   "name": "@jeff-ui/playground"
> }
> ```
>
> 



å¦å¤–ï¼Œä¸ºäº†ä¸è¦æ¯æ¬¡è¿è¡Œéƒ½è¿›å…¥`playground`åŒ…æ‰èƒ½è¿è¡Œï¼Œå¯ä»¥ç›´æ¥åœ¨æ ¹ç›®å½•ä¸‹çš„`package.json`é…ç½®ä¸€ä¸ªå¯åŠ¨è„šæœ¬ï¼Œæ–¹ä¾¿ç›´æ¥å¯åŠ¨é¡¹ç›®ã€‚

```json{6}
{
  "name": "jeff-ui",
  "version": "1.0.0",
  "description": "ç»„ä»¶åº“",
  "scripts": {
    "dev": "pnpm -C playground dev"
  },
  "author": "jeffrey",
  "license": "MIT",
  "devDependencies": {
    "@jeff-ui/components": "workspace: *",
    "@jeff-ui/theme-chalk": "workspace: *",
    "@jeff-ui/utils": "workspace: *"
  },
  "dependencies": {
    "vue": "^3.5.13"
  }
}
```



## 4.ç±»å‹åŒ… typing

åˆ›å»ºä¸€ä¸ª`typing`ç›®å½•ï¼Œç”¨æ¥å­˜æ”¾æˆ‘ä»¬å…³äºTSçš„ä¸€äº›å£°æ˜æ–‡ä»¶ã€‚

```sh
mkdir typing
```

![image-20250307120755845](markdown_assets/image-20250307120755845.png)

å…ˆé¢„ç•™ç€ç›®å½•ï¼Œä¸åšå…¶ä»–å¤„ç†ã€‚



åœ¨ç›®å½•åˆ›å»ºtsçš„é…ç½®æ–‡ä»¶`tsconfig.json`

```json
{
  "compilerOptions": {
      "module": "ESNext", // æŒ‡å®šæ‰“åŒ…æ¨¡å—ç±»å‹ä¸ºESNextï¼Œç´§è·Ÿç°ä»£JavaScriptæ¨¡å—åŒ–è§„èŒƒ
      "declaration": false, // é»˜è®¤ä¸ºä¸ç”Ÿæˆå£°æ˜æ–‡ä»¶ï¼Œå‡å°‘ä¸å¿…è¦çš„æ–‡ä»¶è¾“å‡º
      "noImplicitAny": true, // ä¸¥ç¦æœªå£°æ˜ç±»å‹çš„å˜é‡ï¼Œå¢å¼ºä»£ç çš„ç±»å‹å®‰å…¨æ€§
      "removeComments": true, // ç¼–è¯‘æ—¶è‡ªåŠ¨åˆ é™¤æ³¨é‡Šï¼Œç²¾ç®€ä»£ç ä½“ç§¯
      "moduleResolution": "node", // æŒ‰ç…§Node.jsçš„æ¨¡å—è§£æè§„åˆ™è¿›è¡Œæ¨¡å—æŸ¥æ‰¾
      "esModuleInterop": true, // æ”¯æŒES6æ¨¡å—ä¸CommonJSæ¨¡å—çš„äº’æ“ä½œæ€§
      "jsx": "preserve", // ä¿ç•™JSXè¯­æ³•ï¼Œæ–¹ä¾¿åœ¨Vueç»„ä»¶ä¸­ä½¿ç”¨JSXè¿›è¡Œè§†å›¾ç¼–å†™
      "noLib": false, // æ­£å¸¸å¤„ç†ç±»åº“ï¼Œç¡®ä¿é¡¹ç›®ä¾èµ–çš„å„ç±»åº“æ–‡ä»¶èƒ½è¢«æ­£ç¡®è§£æ
      "target": "ES6", // ä»¥ES6æ ‡å‡†ä¸ºç›®æ ‡ç¼–è¯‘ä»£ç ï¼Œä¿è¯ä»£ç åœ¨ä¸»æµç¯å¢ƒä¸­çš„å…¼å®¹æ€§
      "sourceMap": true, // ç”Ÿæˆsource - mapæ–‡ä»¶ï¼Œæ–¹ä¾¿è°ƒè¯•æ—¶å®šä½åŸå§‹ä»£ç ä½ç½®
      "lib": [
          "ESNext",
          "DOM"
      ], // æŒ‡å®šç¼–è¯‘æ—¶ä½¿ç”¨çš„åº“ï¼Œæ¶µç›–æœ€æ–°çš„JavaScriptç‰¹æ€§ä¸DOMç›¸å…³åŠŸèƒ½
      "allowSyntheticDefaultImports": true, // å…è®¸ä»æ²¡æœ‰é»˜è®¤å¯¼å‡ºçš„æ¨¡å—ä¸­è¿›è¡Œé»˜è®¤å¯¼å…¥
      "experimentalDecorators": true, // å¯ç”¨è£…é¥°å™¨ç‰¹æ€§ï¼Œä¸ºä»£ç ç¼–å†™æä¾›æ›´ä¼˜é›…çš„æ–¹å¼
      "forceConsistentCasingInFileNames": true, // å¼ºåˆ¶æ–‡ä»¶åå¤§å°å†™ä¸€è‡´ï¼Œé¿å…å› å¤§å°å†™é—®é¢˜å¯¼è‡´çš„æ¨¡å—åŠ è½½é”™è¯¯
      "resolveJsonModule": true, // æ”¯æŒè§£æJSONæ¨¡å—ï¼Œæ–¹ä¾¿å¼•å…¥å’Œä½¿ç”¨JSONæ•°æ®
      "strict": true, // å¯ç”¨ä¸¥æ ¼æ¨¡å¼ï¼Œå…¨é¢æå‡ä»£ç çš„ä¸¥è°¨æ€§å’Œå¯é æ€§
      "skipLibCheck": true // è·³è¿‡ç±»åº“æ£€æµ‹ï¼ŒåŠ å¿«ç¼–è¯‘é€Ÿåº¦
  },
  "exclude": [
      "node_modules",
      "**/__tests__",
      "dist/**"
  ]
}

```

> ç›´æ¥é…é»˜è®¤çš„ä¹Ÿè¡Œï¼ŒæŒ‰è‡ªå·±éœ€æ±‚æ”¹å§
>
> ```sh
> npx tsc --init
> ```





## 5.å·¥ä½œç©ºé—´ pnpm-workspace

ç°åœ¨éœ€è¦å®šä¹‰å·¥ä½œç©ºé—´ï¼ŒæŠŠæˆ‘ä»¬åˆšæ‰åˆ›å»ºçš„æ‰€æœ‰ç›®å½•å®šä¹‰å¥½ï¼Œå‘Šè¯‰pnpmï¼Œæˆ‘ä»¬çš„å·¥ä½œç©ºé—´æ¶‰åŠå“ªäº›åŒ…ã€‚

åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`pnpm-workspace.yaml`

```yaml
packages:
  - 'packages/**/*'
  - 'playground'
  - 'typing'
```



## 6.pnpmé…ç½®æ–‡ä»¶

æˆ‘ä»¬éœ€è¦åœ¨pnpmé…ç½®æ–‡ä»¶ä¸­ï¼Œé…ç½®`shamefully-hoist`ä¸º`true`ï¼Œç›®çš„æ˜¯ä¸ºäº†è§£å†³å­åŒ…åœ¨å¼•ç”¨å…¶ä»–åŒ…æ—¶çš„ä¾èµ–è§£æé—®é¢˜ï¼ŒæŠŠä¾èµ–æå‡åˆ°`node_modules`ç›®å½•çš„é¡¶å±‚ã€‚

åœ¨æ ¹ç›®å½•ä¸‹åˆ›å»º`.npmrc`ï¼Œ

```
shamefully-hoist = true
```



## 7.å®‰è£…å­åŒ…

æˆ‘ä»¬æŠŠç»„ä»¶åº“çš„æ ¸å¿ƒåŒ…ï¼Œç»Ÿä¸€å®‰è£…åˆ°`node_modules`ä¸‹ï¼Œè¿™æ ·å¯ä»¥è®©å­åŒ…èƒ½å¤Ÿäº’ç›¸å¼•ç”¨æš´éœ²å‡ºæ¥çš„å˜é‡ã€å‡½æ•°ã€ç»„ä»¶ï¼Œå½¢æˆç»Ÿä¸€çš„å·¥ä½œç©ºé—´ã€‚

å…ˆåœ¨æ ¹ç›®å½•ä¸‹çš„`package.json`ä¸­é…ç½®ä¾èµ–

```json{9-11}
{
  "name": "jeff-ui",
  "version": "1.0.0",
  "description": "ç»„ä»¶åº“",
  "scripts": {},
  "author": "jeffrey",
  "license": "MIT",
  "devDependencies": {
    "@jeff-ui/components": "workspace: *",
    "@jeff-ui/utils": "workspace: *",
    "@jeff-ui/theme-chalk": "workspace: *"
  }
}
```

æ¥ç€ç›´æ¥åœ¨æ ¹ç›®å½•æ‰§è¡Œå®‰è£…å‘½ä»¤

```sh
pnpm install
```

![image-20250307111015742](markdown_assets/image-20250307111015742.png)

![image-20250307111043256](markdown_assets/image-20250307111043256.png)



è‡³æ­¤ï¼Œæˆ‘ä»¬ç»„ä»¶åº“çš„åŸºæœ¬é¡¹ç›®ç›®å½•ç»“æ„ï¼Œå°±å·²ç»åŸºæœ¬æˆå‹äº†ğŸ˜†ğŸ‰ğŸ‰ğŸ‰ã€‚
